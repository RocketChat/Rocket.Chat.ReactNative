appId: chat.rocket.reactnative
tags:
  - 'util'
jsEngine: graaljs
onFlowStart:
  - runFlow:
      file: setup.yaml
      env:
        skipUser: true
      
  - runFlow:
      when:
        true: ${!USERNAME}
      commands:
        - evalScript: ${console.log('No username, creating user')}
        - evalScript: ${output.utils.createUser()}

---
- runFlow: navigate-to-login.yaml
- tapOn:
    id: login-view-email
- inputText: ${USERNAME || output.user.email}
- hideKeyboard
- tapOn:
    id: login-view-password
- inputText: ${PASSWORD || output.user.password}
- hideKeyboard
- tapOn:
    id: login-view-submit
- extendedWaitUntil:
    visible:
      id: rooms-list-view
    timeout: 60000
