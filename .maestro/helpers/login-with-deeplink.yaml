appId: chat.rocket.reactnative
name: Login with Deeplink
tags:
  - 'util'

---
- stopApp: chat.rocket.reactnative
- evalScript: ${output.login = output.utils.login(USERNAME, PASSWORD)}
- runFlow:
    file: 'open-deeplink.yaml'
    env:
      link: ${output.utils.getDeepLink('auth', server || output.data.server, 'userId=', output.login.userId, '&token=', output.login.authToken)}
- extendedWaitUntil:
    visible:
      id: 'rooms-list-view'
    timeout: 60000
