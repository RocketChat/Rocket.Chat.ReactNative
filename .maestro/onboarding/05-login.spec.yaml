appId: chat.rocket.reactnative
---

- runFlow: ../helpers/navigate-to-workspace.yaml

# should insert wrong password and get error
- tapOn:
      text: "Username or email  . Error: "
- inputText:
       text: "someusername"
- tapOn:
      text: "Password  . Error: "
- inputText:
       text: "NotMyActualPassword"
- tapOn:
      id: "login-view-submit"
- assertVisible:
        text: "Your credentials were rejected! Please try again."
- tapOn: "OK"


- runFlow: ./04-createuser.spec.yaml

- runFlow:
    when:
      visible: "Username is already in use"
    commands:
       - tapOn: "OK"
- runFlow:
    when:
      visible: "OK"
    commands:
       - tapOn: "OK"
         
# if user login then logout the user 

- runFlow:
     file: ../helpers/logout.yaml
           
- runFlow: 
      file: ../helpers/navigate-to-workspace.yaml

# should login with success
- tapOn:
      text: "Username or email  . Error: "
- inputText:
       text: ${output.user.username}

- tapOn:
      text: "Password  . Error: "
- inputText:
       text: ${output.user.password}
- tapOn:
      id: "login-view-submit"
