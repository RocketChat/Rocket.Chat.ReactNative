appId: chat.rocket.reactnative
---
- runFlow: ../helpers/launch-app.yaml
- runFlow: ../helpers/login.yaml
- runFlow: ../helpers/logout.yaml
- assertVisible:
    id: 'servers-history-button'

- tapOn:
    id: 'servers-history-button'
- assertVisible:
    id: 'action-sheet'
- assertVisible:
    id: 'servers-history-https://mobile.rocket.chat'

# should tap on a server history and navigate to login
- tapOn: 'Connect to https://mobile.rocket.chat as working.account'
- assertVisible:
    id: 'login-view-submit'
- assertVisible: 'working.account'

# should delete server from history
- runFlow: ../helpers/go-back.yaml
- runFlow: ../helpers/go-back.yaml

- assertVisible:
    id: 'new-server-view'
- tapOn:
    id: 'servers-history-button'
- assertVisible:
    id: 'servers-history-delete-https://mobile.rocket.chat'
- tapOn:
    id: 'servers-history-delete-https://mobile.rocket.chat'

- extendedWaitUntil:
    notVisible:
      id: 'servers-history-button'
    timeout: 10000
- assertVisible:
    id: 'new-server-view'
