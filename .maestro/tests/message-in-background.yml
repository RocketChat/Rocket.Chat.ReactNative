appId: chat.rocket.reactnative
env:
  host: HOST
  rid: RID
  token: TOKEN
  userId: USER_ID
---
- evalScript: ${output.counter = 0}
- repeat:
    times: 50
    commands:
      - pressKey: home
      - evalScript: ${output.counter = output.counter + 1}
      - evalScript: ${output.msg = 'test' + output.counter}
      - runScript:
          file: ../scripts/send-message.js
          env:
            msg: ${output.msg}
            token: ${token}
            userId: ${userId}
            rid: ${rid}
            host: ${host}
      - openLink: ${'rocketchat://room?host=' + host + '&rid=' + rid + '&messageId=' + output.messageId}
      - assertWithAI:
          assertion: ${output.msg} is visible.
