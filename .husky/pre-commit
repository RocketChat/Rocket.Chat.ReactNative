#!/bin/bash

echo "Running code formatting on staged files before commit..."

STAGED_FILES=$(git diff --cached --name-only --diff-filter=ACM | grep -E '\.(js|jsx|ts|tsx|css|scss|json|md|html|vue)$')

if [ -n "$STAGED_FILES" ]; then
  echo "$STAGED_FILES" | xargs yarn prettier --write
  
  echo "$STAGED_FILES" | xargs git add
  
  echo "âœ… Code formatting complete on staged files. Proceeding with commit."
else
  echo "No files to format. Proceeding with commit."
fi

exit 0